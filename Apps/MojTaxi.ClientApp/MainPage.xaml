<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
             x:Class="MojTaxi.ClientApp.Pages.MainPage"
             BackgroundColor="Black"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto,*,70">

        <!-- 🔹 Gornji bar sa 2 buttona -->
        <Grid Grid.Row="0"
              Padding="12,16"
              ColumnDefinitions="Auto,*,Auto"
              BackgroundColor="Transparent">

            <!-- Poziv taksija (lijevo) -->
            <Button Grid.Column="0"
                    Style="{StaticResource TaxiButton}"
                    FontFamily="MaterialIcons"
                    FontSize="26"
                    Text="&#xE0B0;"
                    WidthRequest="52"
                    HeightRequest="52"
                    CornerRadius="26"
                    Command="{Binding CallTaxiCommand}" />

            <!-- Profil (desno) -->
            <Button Grid.Column="2"
                    Style="{StaticResource TaxiButton}"
                    FontFamily="MaterialIcons"
                    FontSize="26"
                    Text="&#xE7FD;"
                    WidthRequest="52"
                    HeightRequest="52"
                    CornerRadius="26"
                    Command="{Binding ProfileCommand}" />
        </Grid>

        <!-- 🔹 Mapa -->
        <Grid Grid.Row="1">
            <maps:Map x:Name="mapControl" 
                      MapType="Street"
                      IsShowingUser="True"
                      VerticalOptions="Fill"
                      HorizontalOptions="Fill" />
        </Grid>

        <!-- 🔹 Donji tabovi -->
        <Grid Grid.Row="2"
              BackgroundColor="Black"
              Padding="12"
              ColumnDefinitions="60,*,*,*,*"
              ColumnSpacing="12"
              VerticalOptions="End"
              HorizontalOptions="FillAndExpand">

            <!-- Hamburger (ne može u VM jer radi animaciju UI-a) -->
            <Button x:Name="HamburgerBtn"
                    Grid.Column="0"
                    Text="|||"
                    FontSize="26"
                    WidthRequest="60"
                    HeightRequest="60"
                    CornerRadius="30"
                    Style="{StaticResource TaxiButton}"
                    TextColor="Black"
                    Clicked="ToggleMenu"/>

            <!-- Ostala dugmad -->
            <Grid Grid.Column="1"
                  Grid.ColumnSpan="4"
                  HorizontalOptions="FillAndExpand">

                <Grid x:Name="TabContainer"
                      IsVisible="False"
                      ColumnDefinitions="*,*,*,*"
                      ColumnSpacing="12"
                      HorizontalOptions="FillAndExpand"
                      VerticalOptions="Center">

                    <!-- Djeca -->
                    <Button Grid.Column="0"
                            Style="{StaticResource TaxiButton}"
                            FontFamily="MaterialIcons"
                            FontSize="24"
                            Text="&#xEB41;"
                            Command="{Binding TabClickedCommand}"
                            CommandParameter="Djeca"/>

                    <!-- Ljubimci -->
                    <Button Grid.Column="1"
                            Style="{StaticResource TaxiButton}"
                            FontFamily="MaterialIcons"
                            FontSize="24"
                            Text="&#xE91D;"
                            Command="{Binding TabClickedCommand}"
                            CommandParameter="Ljubimci"/>

                    <!-- Invalidi -->
                    <Button Grid.Column="2"
                            Style="{StaticResource TaxiButton}"
                            FontFamily="MaterialIcons"
                            FontSize="24"
                            Text="&#xE914;"
                            Command="{Binding TabClickedCommand}"
                            CommandParameter="Invalidi"/>

                    <!-- Alkohol -->
                    <Button Grid.Column="3"
                            Style="{StaticResource TaxiButton}"
                            FontFamily="MaterialIcons"
                            FontSize="24"
                            Text="&#xE540;"
                            Command="{Binding TabClickedCommand}"
                            CommandParameter="Alkohol"/>
                    
                </Grid>
            </Grid>

        </Grid>

    </Grid>
</ContentPage>
